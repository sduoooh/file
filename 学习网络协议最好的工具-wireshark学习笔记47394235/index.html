<div class="CollectionItem"><div></div><h1>学习网络协议最好的工具-wireshark学习笔记</h1><div class="RichText ztext Post-RichText css-1g0fqss" options="[object Object]"><p data-first-child="" data-pid="TDG_miHN">详细学习链接：<a class="external" href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html" rel="nofollow noreferrer" target="_blank"><span class="invisible">http://www.</span><span class="visible">cnblogs.com/TankXiao/ar</span><span class="invisible">chive/2012/10/10/2711777.html</span><span class="ellipsis"></span></a></p><p data-pid="bWop8_DK">记录一下学习wireshark的笔记</p><p data-pid="LzQpVEhM">Bg：由于计网课程需要，详细了解一下了该工具（学习网络协议最好的工具）</p><h2>wireshark介绍</h2><p data-pid="oLMmoKmk">wireshark的官方下载网站： <a class="external" href="https://link.zhihu.com/?target=http%3A//www.wireshark.org/" rel="nofollow noreferrer" target="_blank"><span class="invisible">http://www.</span><span class="visible">wireshark.org/</span><span class="invisible"></span></a></p><p data-pid="qSeP3iYa">wireshark是非常流行的网络封包分析软件，功能十分强大。可以截取各种网络封包，显示网络封包的详细信息。</p><p data-pid="VKFIQF0a">wireshark是开源软件，可以放心使用。 可以运行在Windows和Mac OS上。 </p><h2>Wireshark不能做的</h2><p data-pid="dZiZOaFP">为了安全考虑，wireshark只能查看封包，而不能修改封包的内容，或者发送封包。</p><h2>Wireshark VS Fiddler</h2><p data-pid="2BdkP0sj">Fiddler是在windows上运行的程序，专门用来捕获HTTP，HTTPS的。</p><p data-pid="cHgUjFKQ">wireshark能获取HTTP，也能获取HTTPS，但是不能解密HTTPS，所以wireshark看不懂HTTPS中的内容</p><p data-pid="o1nHwcyJ">总结，如果是处理HTTP,HTTPS 还是用Fiddler,  其他协议比如TCP,UDP 就用wireshark</p><h2>同类的其他工具</h2><p data-pid="aIKFEfT6">微软的network monitor</p><p data-pid="Gu3gnYfz">sniffer （都没用过）</p><h2>什么人会用到wireshark</h2><p data-pid="i0qjfxH3">1. 网络管理员会使用wireshark来检查网络问题</p><p data-pid="FVM501lQ">2. 软件测试工程师使用wireshark抓包，来分析自己测试的软件</p><p data-pid="SZbOLeem">3. 从事socket编程的工程师会用wireshark来调试</p><p data-pid="YFZi8J7a">4. 听说，华为，中兴的大部分工程师都会用到wireshark。</p><p data-pid="5GlnAZrE">总之跟网络相关的东西，都可能会用到wireshark.</p><h2>wireshark 开始抓包</h2><p data-pid="xxngX8bR">开始界面</p><p data-pid="TF0wj6FH">这里重中之重要用管理员权限启动，否则无法读取网卡信息</p><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/3.jpg';this.onerror=null;" src="./img/3.jpg" aspect-ratio ="1.5477075588599751"><p class="ztext-empty-paragraph"><br/></p><p data-pid="yMqeaMiL">笔者此时是用校园网连接网络</p><p data-pid="uUCoDUn6">所以选择的接口WLAN</p><h2>Wireshark 窗口介绍</h2><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/4.jpg';this.onerror=null;" src="./img/4.jpg" aspect-ratio ="1.5477075588599751"><p class="ztext-empty-paragraph"><br/></p><p data-pid="Lj1MRI75">从上至下依次是</p><p data-pid="8XPuLe1S">WireShark 主要分为这几个界面</p><p data-pid="Qhu1EaLl">1. Display Filter(显示过滤器)，  用于过滤</p><p data-pid="koL83EZQ">2. Packet List Pane(封包列表)， 显示捕获到的封包， 有源地址和目标地址，端口号。 颜色不同，代表</p><p data-pid="LnHR5Ob0">3. Packet Details Pane(封包详细信息), 显示封包中的字段</p><p data-pid="77u-3XfH">4. Dissector Pane(16进制数据)</p><p data-pid="vkDQEZdT">5. Miscellanous(地址栏，杂项)</p><p data-pid="cEPPLRbG"><b>Wireshark 显示过滤</b></p><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/5.jpg';this.onerror=null;" src="./img/5.jpg" aspect-ratio ="30.390243902439025"><p class="ztext-empty-paragraph"><br/></p><p data-pid="-0UW08Cc">使用过滤是非常重要的， 在使用wireshark时，将会得到大量的冗余信息，在几千甚至几万条记录中，为了找到自己需要的部分，所以过滤必不可少。</p><p data-pid="vnnsn72u">过滤器会帮助我们在大量的数据中迅速找到我们需要的信息。</p><p data-pid="ilPzJ_9H">过滤器有两种，</p><p data-pid="yArHwjpo">一种是显示过滤器，就是主界面上那个，用来在捕获的记录中找到所需要的记录</p><p data-pid="sGnqx3PU">一种是捕获过滤器，用来过滤捕获的封包，以免捕获太多的记录。 在捕获 -&gt; 捕获过滤器中设置</p><p data-pid="homCSxyE"><b>保存过滤</b></p><p data-pid="f8KX1Fv9">在Filter栏上，填好Filter的表达式后，点击Save按钮， 取个名字。比如"Filter 102"</p><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/6.jpg';this.onerror=null;" src="./img/6.jpg" aspect-ratio ="1.5117967332123412"><p class="ztext-empty-paragraph"><br/></p><p data-pid="B9QqkeMJ">不管捕获还是显示都可以自己设置增删改查</p><p data-pid="E81FR4vb"><b>过滤表达式的规则</b></p><p data-pid="9gMGyrVr">表达式规则（这里都是采用已有默认的功能）</p><p data-pid="mDaBa5Gl">1. 协议过滤</p><p data-pid="XJjzj_Dg">比如TCP，只显示TCP协议。</p><p data-pid="l_V8sqq4">2. IP 过滤</p><p data-pid="GIbFOB2L">比如 ip.src ==192.168.1.102 显示源地址为192.168.1.102，</p><p data-pid="Ma_4qBKX">ip.dst==192.168.1.102, 目标地址为192.168.1.102</p><p data-pid="K3jlwB0R">3. 端口过滤</p><p data-pid="SWHh61zG">tcp.port ==80,  端口为80的</p><p data-pid="sagSmdOd">tcp.srcport == 80,  只显示TCP协议的愿端口为80的。</p><p data-pid="NHHnw8RH">4. Http模式过滤</p><p data-pid="ghnMaG8K">http.request.method=="GET",   只显示HTTP GET方法的。</p><p data-pid="eKW_C66p">5. 逻辑运算符为 AND/ OR</p><p data-pid="5CP0bByj">常用的过滤表达式</p><p data-pid="mHf6aJ9C">过滤表达式</p><p data-pid="yt_ypPfR">用途</p><p data-pid="mxmYkdLQ">http</p><p data-pid="05nhHww2">只查看HTTP协议的记录</p><p data-pid="8ligU6YL">ip.src ==192.168.1.102 or ip.dst==192.168.1.102</p><p data-pid="SSgK-7mZ"> 源地址或者目标地址是192.168.1.102</p><p data-pid="KD4sh7SG">这里还有很多笔者只是举了一些例子</p><h2>封包列表(Packet List Pane)</h2><p data-pid="sld5qqnJ">封包列表的面板中显示：</p><p data-pid="FPc1sxGY">编号，时间戳，源地址，目标地址，协议，长度，以及封包信息。 </p><p data-pid="4SuX9w-8">你可以看到不同的协议用了不同的颜色显示。你也可以修改这些显示颜色的规则，  视图-&gt;着色规则</p><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/7.jpg';this.onerror=null;" src="./img/7.jpg" aspect-ratio ="4.590405904059041"><p class="ztext-empty-paragraph"><br/></p><h2>封包详细信息 (Packet Details Pane)</h2><p data-pid="2O9Lxtlb">这个面板是我们最重要的，用来查看协议中的每一个字段。</p><p data-pid="T3EzbFbq">各行信息分别为</p><p data-pid="pLjVnuz7">Frame:   物理层的数据帧概况</p><p data-pid="rRylAhPp">Ethernet II: 数据链路层以太网帧头部信息</p><p data-pid="xi6zLCY7">Internet Protocol Version 4: 互联网层IP包头部信息</p><p data-pid="mvMc3xzl">Transmission Control Protocol:  传输层T的数据段头部信息，此处是TCP</p><p data-pid="5Dd6-szF">Hypertext Transfer Protocol:  应用层的信息，此处是HTTP协议</p><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/8.jpg';this.onerror=null;" src="./img/8.jpg" aspect-ratio ="6.23"><p class="ztext-empty-paragraph"><br/></p><h2>wireshark与对应的OSI七层模型</h2><p class="ztext-empty-paragraph"><br/></p><img loading="lazy" onerror="this.src='https://collection.sduoooh.me/学习网络协议最好的工具-wireshark学习笔记47394235/img/9.jpg';this.onerror=null;" src="./img/9.jpg" aspect-ratio ="1.795131845841785"><p></p><p></p></div><link href="../style.css" rel="stylesheet"/><div class="ContentItem-time" role="button" tabindex="0"><a href="https://zhuanlan.zhihu.com/p/47394235">发布于 2018-10-22 19:48</a><span></span></div></div>